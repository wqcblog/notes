## 常用属性及操作

| 编号 | 属性或方法名 | 作用                                                         |
| ---- | ------------ | ------------------------------------------------------------ |
| 1    | Length       | 获取字符串的长度，即字符串中字符的个数                       |
| 2    | IndexOf      | 返回整数，得到指定的字符串在原字符串中第一次出现的位置       |
| 3    | LastlndexOf  | 返回整数，得到指定的字符串在原字符串中最后一次出现的位置     |
| 4    | Starts With  | 返回布尔型的值，判断某个字符串是否以指定的字符串开头         |
| 5    | EndsWith     | 返回布尔型的值，判断某个字符串是否以指定的字符串结尾         |
| 6    | ToLower      | 返回一个新的字符串，将字符串中的大写字母转换成小写字母       |
| 7    | ToUpper      | 返回一个新的字符串，将字符串中的小写字母转换成大写字母       |
| 8    | Trim         | 返回一个新的字符串，不带任何参数时表示将原字符串中前后的空格删除。 参数为字符数组时表示将原字符串中含有的字符数组中的字符删除 |
| 9    | Remove       | 返回一个新的字符串，将字符串中指定位置的字符串移除           |
| 10   | TrimStart    | 返回一个新的字符串，将字符串中左侧的空格删除                 |
| 11   | TrimEnd      | 返回一个新的字符串，将字符串中右侧的空格删除                 |
| 12   | PadLeft      | 返回一个新的字符串，从字符串的左侧填充空格达到指定的字符串长度 |
| 13   | PadRight     | 返回一个新的字符串，从字符串的右侧填充空格达到指定的字符串长度 |
| 14   | Split        | 返回一个字符串类型的数组，根据指定的字符数组或者字符串数组中的字符 或字符串作为条件拆分字符串 |
| 15   | Replace      | 返回一个新的字符串，用于将指定字符串替换给原字符串中指定的字符串 |
| 16   | Substring    | 返回一个新的字符串，用于截取指定的字符串                     |
| 17   | Insert       | 返回一个新的字符串，将一个字符串插入到另一个字符串中指定索引的位置 |
| 18   | Concat       | 返回一个新的字符串，将多个字符串合并成一个字符串             |

## 字符串比较

字符串类型的值不能直接使用大于、小于的方式比较，要使用字符串的 CompareTo 方法，该方法的返回值是 int 类型，语法形式如下。

>字符串1.CompareTo(字符串2);

当字符串 1 与字符串 2 相等时结果为 0；

当字符串 1 的字符顺序在字符串 2 前面时结果为 -1;

当字符串 1 的字符顺序在字符串 2 后面时结果为1。

在由多个字符组成的字符串中，首先比较的是两个字符串的首字母，如果相同则比较第二个字符，依此类推，如果两个字符串的首字母不同，则不再比较后面的字符。

```cs
string.IsNullOrEmpty(name) //判断字符串是否为空或NULL
```

```cs
"xiaoming".Equals(name) //判断字符串是否相等  
```

## 获取字符串长度

> 字符串.Length    //Length属性可获取字符串长度

获取字符串中的第一个字符使用的下标是 0,则字符串中最后一个字符的下标是字符串的长度减 1。

## 查找字符串字符

字符串的查找方法有 IndexOf、LastlndexOf，IndexOf 方法得到的是指定字符串在原字符串中第一次出现的位置，LastlndexOf 方法得到的是指定字符串在查找的字符串中最后一次出现的位置。

无论是哪个方法，只要指定的字符串在查找的字符串中不存在，结果都为 -1。

如果要判断字符串中是否仅含有一个指定的字符串，则需要将 IndexOf 和 LastlndexOf 方法一起使用，只要通过这两个方法得到的字符串出现的位置是同一个即可。

## 字符串替换

替换字符串的方法是`Replace`方法。

```cs
class Program
{
    static void Main(string[] args)
    {
        string str = Console.ReadLine();
        if (str.IndexOf(",") != -1)
        {
            str = str.Replace(",", "_");
        }
        Console.WriteLine("替换后的字符串为：" + str);
    }
}
```

## 字符串截取

截取字符串的方法是 Substring 方法，在使用该方法时有以下两种方法传递参数。

```cs
Substring(指定位置); //从字符串中的指定位置开始截取到字符串结束
Substring(指定位置, 截取的字符的个数); //从字符串中的指定位置开始截取指定字符个数的字符
```

```cs
//截取邮箱格式的用户名
class Program
{
    static void Main(string[] args)
    {
        string str = Console.ReadLine();
        int firstIndex = str.IndexOf("@");
        int lastIndex = str.LastIndexOf("@");
        if(firstIndex != -1 && firstIndex == lastIndex)
        {
            str = str.Substring(0, firstIndex);
        }
        Console.WriteLine("邮箱中的用户名是：" + str);
    }
}
```

## 字符串插入

 Insert 方法中需要两个参数，一个是字符串插入的位置，一个是字符串。

## 数据类型转换

C# 允许使用两种转换方式：隐式类型转换和显式类型转换。

- 隐式类型转换

这些转换是 C# 默认的以安全方式进行的转换，不会导致数据丢失。例如，从小的整数类型转换为大的整数类型，从派生类转换为基类。

- 显式类型转换

显式类型转换，即强制类型转换。显式转换需要强制转换运算符，而且强制转换会造成数据丢失。

常用的类型转换方法如下表所示。

| 方法       | 描述                                              |
| ---------- | ------------------------------------------------- |
| ToBoolean  | 如果可能的话，把类型转换为布尔型。                |
| ToByte     | 把类型转换为字节类型。                            |
| ToChar     | 如果可能的话，把类型转换为单个 Unicode 字符类型。 |
| ToDateTime | 把类型（整数或字符串类型）转换为 日期-时间 结构。 |
| ToDecimal  | 把浮点型或整数类型转换为十进制类型。              |
| ToDouble   | 把类型转换为双精度浮点型。                        |
| ToInt16    | 把类型转换为 16 位整数类型。                      |
| ToInt32    | 把类型转换为 32 位整数类型。                      |
| ToInt64    | 把类型转换为 64 位整数类型。                      |
| ToSbyte    | 把类型转换为有符号字节类型。                      |
| ToSingle   | 把类型转换为小浮点数类型。                        |
| ToString   | 把类型转换为字符串类型。                          |
| ToType     | 把类型转换为指定类型。                            |
| ToUInt16   | 把类型转换为 16 位无符号整数类型。                |
| ToUInt32   | 把类型转换为 32 位无符号整数类型。                |
| ToUInt64   | 把类型转换为 64 位无符号整数类型。                |

### 隐式转换

隐式转换指不需要其他方法数据类型直接进行转换。

主要是在整型，浮点型之间的转换，将存储范围小的数据类型直接转换成存储范围大的数据类型(从低精度的数值类型到高精度的数值类型的转换)。

隐式数值转换包括以下几种：

- 从 sbyte 类型到 short,int,long,float,double,或 decimal 类型。
- 从 byte 类型到 short,ushort,int,uint,long,ulong,float,double,或 decimal 类型。
- 从 short 类型到 int,long,float,double,或 decimal 类型。
- 从 ushort 类型到 int,uint,long,ulong,float,double,或 decimal 类型。
- 从 int 类型到 long,float,double,或 decimal 类型。
- 从 uint 类型到 long,ulong,float,double,或 decimal 类型。
- 从 long 类型到 float,double,或 decimal 类型。
- 从 ulong 类型到 float,double,或 decimal 类型。
- 从 char 类型到 ushort,int,uint,long,ulong,float,double,或 decimal 类型。
- 从 float 类型到 double 类型。

其中，从 int，uint 或 long 到 float 以及从 long 到 double 的转换可能会导致精度下降，但决不会引起数量上的丢失。其它的隐式数值转换则不会有任何信息丢失。

### 强制类型转换

强制类型转换主要用于将存储范围大的数据类型转换成存储范围小的，但数据类型需要兼容。

例如 int 型转换成 float 型是可行的，但 float 型转换成 int 型则会造成数据精度丢失，而且字符串类型与整数类型之间是无法进行强制类型转换的。

>数据类型变量名 = (数据类型) 变量名或值;

将值进行数据类型的强制转换，但损失了数据的精度，造成了数据的不准确，因此在使用强制类型转换时还需要注意数据的准确性。

### Parse转换

Parse 方法用于将字符串类型转换成任意类型，具体的语法形式如下

>数据类型  变量=数据类型.Parse(字符串类型的值);

这里要求等号左、右两边的数据类型兼容。

```cs
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("请输入三个数字");
        int num1 = int.Parse(Console.ReadLine());
        int num2 = int.Parse(Console.ReadLine());
        int num3 = int.Parse(Console.ReadLine());
        int maxvalue = num1;
        if (num2 > maxvalue)
        {
            maxvalue = num2;
        }
        if (num3 > maxvalue)
        {
            maxvalue = num3;
        }
        Console.WriteLine("三个数中最大的值是：" + maxvalue);
    }
}
```

在上面的实例中使用 Parse 方法将字符串类型转换成了整数类型 int，但输入的字符串必须是数字并且不能超出 int 类型的取值范围。

### Convert方法

Convert 方法是数据类型转换中最灵活的方法，它能够将任意数据类型的值转换成任意数据类型，前提是不要超出指定数据类型的范围。

>数据类型 变量名 = convert.To数据类型(变量名);

这里 Convert.To 后面的数据类型要与等号左边的数据类型相匹配。

Convert 类常用的类型转换方法如下表所示。

| 方法                 | 说明                       |
| -------------------- | -------------------------- |
| Convert.ToInt16()    | 转换为整型(short)          |
| Convert.ToInt32()    | 转换为整型(int)            |
| Convert.ToInt64()    | 转换为整型(long)           |
| Convert.ToChar()     | 转换为字符型(char)         |
| Convert.ToString()   | 转换为字符串型(string)     |
| Convert.ToDateTime() | 转换为日期型(datetime)     |
| Convert.ToDouble()   | 转换为双精度浮点型(double) |
| Conert.ToSingle()    | 转换为单精度浮点型(float)  |

### 装箱和拆箱

ToString 方法用于将任意的数据类型转换成字符串类型，例如将整数类型转换成字符串类型。

在 C# 语言中数据类型分为值类型和引用类型，将值类型转换为引用类型的操作称为装箱，相应地将引用类型转换成值类型称为拆箱。

利用装箱和拆箱功能，可通过允许值类型的任何值与 Object 类型的值相互转换。(装直接赋，拆需要转)

```cs
int val = 100;
object obj = val;//object类型可以接收任何数据类型的直接转换
Console.WriteLine("对象的值 = {0}", obj);
//这是一个装箱的过程，是将值类型转换为引用类型的过程

int val = 100;
object obj = val;
int num = (int) obj;
Console.WriteLine("num: {0}", num);
//这是一个拆箱的过程，是将值类型转换为引用类型，再由引用类型转换为值类型的过程
```

## 正则表达式

### 基础知识

正则表达式的符号主要分为元字符和表示重复的字符，分别如下表所示。

| 编号 | 字符 | 描述                       |
| ---- | ---- | -------------------------- |
| 1    | .    | 匹配除换行符以外的所有字符 |
| 2    | \w   | 匹配字母、数字、下画线     |
| 3    | \s   | 匹配空白符（空格）         |
| 4    | \d   | 匹配数字                   |
| 5    | \b   | 匹配表达式的开始或结束     |
| 6    | ^    | 匹配表达式的开始           |
| 7    | $    | 匹配表达式的结束           |

| 编 号 | 字 符 | 描 述         |
| ----- | ----- | ------------- |
| 1     | *     | 0次或多次字符 |
| 2     | ?     | 0次或1次字符  |
| 3     | +     | 1次或多次字符 |
| 4     | {n}   | n次字符       |
| 5     | {n,M} | n到M次字符    |
| 6     | {n, } | n次以上字符   |

| 字符        | 描述                                                         |
| ----------- | ------------------------------------------------------------ |
| \           | 转义字符，将一个具有特殊功能的字符转义为一个普通字符，或反过来 |
| (pattern)   | 匹配 pattern 并获取这一匹配                                  |
| (?:pattern) | 匹配 pattern 但不获取匹配结果                                |
| (?=pattern) | 正向预查，在任何匹配 pattern 的字符串开始处匹配查找字符串    |
| (?!pattern) | 负向预查，在任何不匹配 pattern 的字符串开始处匹配查找字符串  |
| x\|y        | 匹配x或y。例如，‘z\|food’能匹配“z”或“food”。‘(z\|f)ood’则匹配“zood”或“food” |
| [xyz]       | 字符集合。匹配所包含的任意一个字符。                         |
| [^xyz]      | 负值字符集合。匹配未包含的任意字符。                         |
| [a-z]       | 匹配指定范围内的任意字符。例如，‘[a-z]’可以匹配'a'到'z'范围内的任意小写字母字符 |
| [^a-z]      | 匹配不在指定范围内的任意字符。例如，‘[^a-z]’可以匹配不在‘a’～‘z’'内的任意字符 |
| \B          | 匹配非单词边界                                               |
| \D          | 匹配一个非数字字符，等价于 [^0-9]                            |
| \f          | 匹配一个换页符                                               |
| \n          | 匹配一个换行符                                               |
| \r          | 匹配一个回车符                                               |
| \S          | 匹配任何非空白字符                                           |
| \t          | 匹配一个制表符                                               |
| \v          | 匹配一个垂直制表符。等价于 \x0b 和 \cK                       |
| \W          | 匹配任何非单词字符。等价于‘[^A-Za-z0-9_]’                    |

此外，在正则表达式中使用`|`分隔符表示多个正则表达式之间的或者关系，也就是在匹配某一个字符串时满足其中一个正则表达式即可。

例如使用正则表达式来验证身份证信息，第一代身份证是由 15 个数字构成的，第二代身份证是由 18 个数字构成的，正则表达式可以写成 `\d{15}|\d{18}`。

常用的正则表达式，如下表所示。

| 编号 | 正则表达式               | 作用                                                         |
| ---- | ------------------------ | ------------------------------------------------------------ |
| 1    | \d{15}\|\d{18}           | 验证身份证号码（15位或18位）                                 |
| 2    | \d{3}-\d{8}\|\d{4}-\d{7} | 验证国内的固定电话（区号有3位或4位，并在区号和电话号码之 间加上-） |
| 3    | ^[1-9]\d*$               | 验证字符串中都是正整数                                       |
| 4    | ^-[1-9]\d*$              | 验证字符串中都是负整数                                       |
| 5    | ^-?[1-9]\d*$             | 验证字符串中是整数                                           |
| 6    | ^[A-Za-z]+$              | 验证字符串中全是字母                                         |
| 7    | A[A-Za-z0-9]+$           | 验证字符串由数字和字母构成                                   |
| 8    | [\u4e00-\u9fa5]          | 匹配字符串中的中文                                           |
| 9    | [^\x00-\xff]             | 匹配字符串中的双字节字符（包括汉字）                         |

### Regex

在 C# 语言中使用正则表达式时要用到 Regex 类,该类在 System.Text.RegularExpressions 名称空间中。

在 Regex 类中使用 IsMatch 方法判断所匹配的字符串是否满足正则表达式的要求。

```cs
//判断邮箱的正确性
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("请输入一个邮箱");
        string email = Console.ReadLine();
        Regex regex = new Regex(@"^(\w)+(\.\w)*@(\w)+((\.\w+)+)$");
        if (regex.IsMatch(email))
        {
            Console.WriteLine("邮箱格式正确。");
        }
        else
        {
            Console.WriteLine("邮箱格式不正确。");
        }
    }
}
```

邮箱的正则表达式也有多种写法，上面的写法只是其中的一种，例如将实例中的`\w`替换成`[a-zA-Z0-9_]`。
